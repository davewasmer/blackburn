<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Serializers | blackburn</title>
          <base href="/blackburn/">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link href='http://fonts.googleapis.com/css?family=Raleway:400,800,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="styles.css">

        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
            <script>window.html5 || document.write('<script src="js/vendor/html5shiv.js"><\/script>')</script>
        <![endif]-->
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <header>
          <h1 class='project-name'>
            <a href=''>blackburn</a>
          </h1>
          <p class='project-description'>Drop-in serializer support for Express/Connect Node apps.</p>
        
          <nav>
        
            <!-- Project Repo Link -->
              <a href='https://github.com/davewasmer/blackburn' class='nav-link repo-link'>View on Github (davewasmer/blackburn)</a>
        
            <!-- Pages -->
              <div class='page-nav'>
                <h4 class='nav-header'>Documentation</h4>
                  <!-- Page -->
                  <a href='' class='nav-link page-link'>Adapters</a>
                  <!-- Page -->
                  <a href='' class='nav-link page-link'></a>
                  <!-- Page -->
                  <a href='' class='nav-link page-link'>Serializers</a>
              </div>
        
            <!-- API -->
              <div class='api-nav'>
                <h4 class='nav-header'>API Reference</h4>
                  <!-- Module -->
                  <a href='api/lib/adapter.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>Adapter</span>
                    <span class='api-nav-module-file'>lib/adapter.js</span>
                  </a>
                  <!-- Module -->
                  <a href='api/lib/adapters/raw.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>Raw Adapter</span>
                    <span class='api-nav-module-file'>lib/adapters/raw.js</span>
                  </a>
                  <!-- Module -->
                  <a href='api/lib/index.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>blackburn</span>
                    <span class='api-nav-module-file'>lib/index.js</span>
                  </a>
                  <!-- Module -->
                  <a href='api/lib/serializer.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>Serializer</span>
                    <span class='api-nav-module-file'>lib/serializer.js</span>
                  </a>
                  <!-- Module -->
                  <a href='api/lib/serializers/flat.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>FlatSerializer</span>
                    <span class='api-nav-module-file'>lib/serializers/flat.js</span>
                  </a>
                  <!-- Module -->
                  <a href='api/lib/serializers/jsonapi.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>JSONAPISerializer</span>
                    <span class='api-nav-module-file'>lib/serializers/jsonapi.js</span>
                  </a>
                  <!-- Module -->
                  <a href='api/lib/serializers/root.js' class='nav-link api-link'>
                    <span class='api-nav-module-name'>RootSerializer</span>
                    <span class='api-nav-module-file'>lib/serializers/root.js</span>
                  </a>
              </div>
          </nav>
        </header>
        <div class='container'>
          <h2>Serializers</h2>
<p>Serializers allow you to customize what data is returned the response, and apply simple transformations to it.</p><h3>Serializing attributes</h3>
<p>By default, you must define a whitelist of all attributes that will be sent back with the response:</p><pre><code class="lang-js"><span class="hljs-comment">// serializers/user.js</span>
<span class="hljs-keyword">import</span> { FlatSerializer } <span class="hljs-keyword">from</span> <span class="hljs-string">'blackburn'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> FlatSerializer.extend({
  attributes: [
    <span class="hljs-string">'first_name'</span>,
    <span class="hljs-string">'last_name'</span>,
    <span class="hljs-string">'email'</span>
  ]
});
</code></pre>
<p>If your User model also includes an <code>hashed_password</code> field, then the serializer above would strip that from the response. One of the benefits here is that the UserSerializer will run whenever a user is serialized, <em>even if it&#39;s a related record</em>. This way, you don&#39;t need to remember to strip the <code>hashed_password</code> on every possible route in your app.</p><p>You can also customize how the data from your records is serialized, and apply basic transformations to it:</p><pre><code class="lang-js"><span class="hljs-comment">// serializers/book.js</span>
<span class="hljs-keyword">import</span> { Serializer } <span class="hljs-keyword">from</span> <span class="hljs-string">'blackburn'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Serializer.extend({
  attributes: [
    <span class="hljs-string">'title'</span>,
    <span class="hljs-string">'published_at'</span>,
    <span class="hljs-string">'published_city'</span>
  ],

  <span class="hljs-comment">// keyForAttribute lets you rename attribute names when they are converted to payload keys</span>
  keyForAttribute(attributeName) {
    <span class="hljs-comment">// In this case, we convert underscored_keys to camelCasedKeys</span>
    <span class="hljs-keyword">return</span> camelCase(attributeName);
  }
});
</code></pre>
<h3>Serializing relationships</h3>
<p>You can also customize how related data is serialized with your records. Serializing relationships is typically much more complex than basic attributes, so you can provide your own config for each relationship to decide how it is serialized.</p><p>Only three options are supported by all the built-in serializers: <code>type</code> (required), <code>strategy</code> (required), and <code>serializer</code> (optional):</p><pre><code class="lang-js"><span class="hljs-comment">// serializers/book.js</span>
<span class="hljs-keyword">import</span> { FlatSerializer } <span class="hljs-keyword">from</span> <span class="hljs-string">'blackburn'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> FlatSerializer.extend({

  relationships: {
    author: {
      <span class="hljs-comment">// The type of the related record</span>
      type: <span class="hljs-string">'users'</span>,
      <span class="hljs-comment">// Send only the id of the author, not the entire author record. Other</span>
      <span class="hljs-comment">// possible strategies include 'ids', 'record', and 'records'. The last</span>
      <span class="hljs-comment">// two send the entire related record(s) with the response.</span>
      strategy: <span class="hljs-string">'id'</span>,
      <span class="hljs-comment">// If you want to customize how a related record is serialized, different</span>
      <span class="hljs-comment">// from it's standard serializer, you can supply a serializer for only</span>
      <span class="hljs-comment">// this relationship</span>
      serializer: BookAuthorSerializer
    }
  }
});
</code></pre>
<p>Similar to attributes, you can also perform basic transformations to the relationship and it&#39;s properties:</p><pre><code class="lang-js"><span class="hljs-comment">// serializers/book.js</span>
<span class="hljs-keyword">import</span> { FlatSerializer } <span class="hljs-keyword">from</span> <span class="hljs-string">'blackburn'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> FlatSerializer.extend({

  <span class="hljs-comment">// keyForRelationship lets you rename relationships</span>
  keyForRelationship(relationshipName) {
    <span class="hljs-comment">// In this case, we convert underscored_keys to camelCasedKeys</span>
    <span class="hljs-keyword">return</span> camelCase(relationshipName);
  }

});
</code></pre>
<p>Finally, some serializers may provide more options for serializing relationships. For example, the JSONAPI serializer supports adding relationship links to the payload:</p><pre><code class="lang-js"><span class="hljs-comment">// serializers/book.js</span>
<span class="hljs-keyword">import</span> { JSONAPISerializer } <span class="hljs-keyword">from</span> <span class="hljs-string">'blackburn'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> JSONAPISerializer.extend({

  relationships: {
    author: {
      type: <span class="hljs-string">'users'</span>,
      strategy: <span class="hljs-string">'id'</span>,
      relationshipLink: <span class="hljs-string">'/books/{id}/relationships/author'</span>,
      relatedLink: <span class="hljs-string">'/books/{id}/author'</span>
    }
  }
});
</code></pre>
<p>See the documentation for each serializer for available options.</p>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
    </body>
</html>
